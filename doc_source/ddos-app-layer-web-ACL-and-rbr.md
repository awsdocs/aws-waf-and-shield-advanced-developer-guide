# Shield Advanced application layer AWS WAF web ACLs and rate\-based rules<a name="ddos-app-layer-web-ACL-and-rbr"></a>

To protect an application layer resource with Shield Advanced, you start by associating an AWS WAF web ACL with the resource\. AWS WAF is a web application firewall that lets you monitor the HTTP and HTTPS requests that are forwarded to your application layer resources, and lets you control access to your content based on the characteristics of the requests\. You can configure a web ACL to monitor and manage requests based on factors such as where the request originated, the contents of query strings and cookies, and the rate of requests coming from a single IP address\. At a minimum, your Shield Advanced protection requires you to associate a web ACL with a rate\-based rule, which limits the rate of requests for each IP address\. 

If the associated web ACL doesn't have a rate\-based rule defined, Shield Advanced prompts you to define at least one\. Rate\-based rules automatically block traffic from source IPs when they exceed the thresholds that you define\. They help protect your application against web request floods and can provide alerts about sudden spikes in traffic that might indicate a potential DDoS attack\. 

With your web ACL in place, if a DDoS attack occurs, you apply mitigations by adding and managing rules in the web ACL\. You can do this directly, with the assistance of the Shield Response Team \(SRT\), or automatically through automatic application layer DDoS mitigation\. 

**How rate\-based rules work**  
When you use a rate\-based rule, every 30 seconds, AWS WAF evaluates traffic for the prior five minutes\. AWS WAF blocks requests from any source IP address that exceeds the threshold until the request rate drops down to an acceptable level\. When you configure a rate\-based rule, configure its rate threshold to a value that's greater than the normal traffic rate that you expect from any one source IP in any five minute time window\. 

You might want to use more than one rate\-based rule in a web ACL\. For example, you could have one rate\-based rule for all traffic that has a high threshold plus one or more additional rules that are configured to match select parts of your web application and that have lower thresholds\. For example, you might match on the URI `/login.html` with a lower threshold, to mitigate abuse against a login page\. 

For additional information and guidance, see the security blog post [The three most important AWS WAF rate\-based rules](http://aws.amazon.com/blogs/security/three-most-important-aws-waf-rate-based-rules/)\.

**Expanded configuration options through AWS WAF**  
The Shield Advanced console enables you to add a rate\-based rule and configure it with the essential settings\. You can define additional configuration options by managing your rate\-based rules through AWS WAF\. For example, you can configure the rule to aggregate on a forwarded IP address and you can add a scope\-down statement to filter out some requests from evaluation\. For all of the configuration options, see [Rate\-based rule statement](waf-rule-statement-type-rate-based.md)\. For information about using AWS WAF to manage your web request monitoring and management rules, see [Creating a web ACL](web-acl-creating.md)\. 