# Health check examples<a name="health-checks-examples"></a>

This section shows examples of health checks that you could use in a calculated health check\. A calculated health check uses a number of individual health checks to determine a combined status\. The status of each individual health check is based on the health of an endpoint or on the state of an Amazon CloudWatch metric\. You combine health checks into a calculated health check and then configure your calculated health check to report health based on the combined health status of the individual health checks\. Tune the sensitivity of your calculated health checks according to your requirements for application performance and availability\. 

For information about calculated health checks, see [Monitoring other health checks \(calculated health checks\)](https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/health-checks-creating-values.html#health-checks-creating-values-calculated) in the Amazon Route 53 Developer Guide\. For additional information, see the blog post [Route 53 Improvements – Calculated Health Checks and Latency Checks](https://aws.amazon.com/blogs/aws/route-53-improvements-calculated-health-checks-and-latency-checks/)\.

**Topics**
+ [Amazon CloudFront distributions](#health-checks-example-cloudfront)
+ [Load balancers](#health-checks-example-load-balancer)
+ [Amazon EC2 elastic IP address \(EIP\)](#health-checks-example-elastic-ip)

## Amazon CloudFront distributions<a name="health-checks-example-cloudfront"></a>

The following examples describe health checks that could be combined into a calculated health check for a CloudFront distribution: 
+ Monitor an endpoint by specifying a domain name to a path on the distribution that's serving dynamic content\. A healthy response would include HTTP response codes 2xx and 3xx\.
+ Monitor the state of a CloudWatch alarm that's measuring the health of the CloudFront origin\. For example, you can maintain a CloudWatch alarm on the Application Load Balancer metric `TargetResponseTime`, and create a health check that reflects the status of the alarm\. The health check can be unhealthy when the response time, between request leaving the load balancer and when the load balancer receives a response from the target, exceeds the threshold configured in the alarm\.
+ Monitor the state of a CloudWatch alarm that measures the percentage of requests for which the response’s HTTP status code is 5xx\. If the CloudFront distribution's 5xx error rate is higher than the threshold defined in the CloudWatch alarm, the status of this health check will switch to unhealthy\. 

## Load balancers<a name="health-checks-example-load-balancer"></a>

The following examples describe health checks that could be used in calculated health checks for an Application Load Balancer, Network Load Balancer, or Global Accelerator standard accelerator\. 
+ Monitor the state of a CloudWatch alarm that measures the number of new connections established by clients to the load balancer\. You can set the alarm threshold for the average number of new connections at some degree higher than your every day average\. The metrics for each resource type are the following: 
  + Application Load Balancer: `NewConnectionCount`
  + Network Load Balancer: `ActiveFlowCount`
  + Global Accelerator: `NewFlowCount`
+ For Application Load Balancer and Network Load Balancer, monitor the state of a CloudWatch alarm that measures the number of load balancers that are considered healthy\. You can set the alarm threshold either on Availability Zone or on the minimum number of healthy hosts that your load balancer requires\. The available metrics for the load balancer resources are as follows: 
  + Application Load Balancer: `HealthyHostCount`
  + Network Load Balancer: `HealthyHostCount`
+ For Application Load Balancer, monitor the state of a CloudWatch alarm that measures the number of HTTP 5xx response codes generated by the load balancer targets\. For an Application Load Balancer, you can use the metric `HTTPCode_Target_5XX_Count` and base the alarm threshold on the sum of all 5xx errors for the load balancer\. 

## Amazon EC2 elastic IP address \(EIP\)<a name="health-checks-example-elastic-ip"></a>

The following example health checks could be combined into a calculated health check for an Amazon EC2 elastic IP address: 
+ Monitor an endpoint by specifying an IP address to the Elastic IP address\. The health check will remain healthy as long as a TCP connection can be established with the resource behind the IP address\.
+ Monitor the state of a CloudWatch alarm that measures the percentage of allocated Amazon EC2 compute units that are currently in use on the instance\. You can use the Amazon EC2 metric `CPUUtilization` and base the alarm threshold on what you consider to be a high CPU utilization rate for your application, such as 90%\.